{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["(function (window, document) {\r\n    const key = '323925712C8B49E48C00EBA72486203D'\r\n    elementsId = [\r\n        'details',\r\n        'print',\r\n        'download',\r\n        'today',\r\n        'hideRequests'\r\n    ],\r\n        elements = {};\r\n    init();\r\n\r\n    function init() {\r\n        try {\r\n            initElements();\r\n            initDetailsToggle();\r\n            requestData();\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    function initElements() {\r\n        let index, id;\r\n        for (index = 0; index < elementsId.length; index++) {\r\n            id = elementsId[index];\r\n            elements[id] = document.getElementById(id);\r\n        }\r\n\r\n        elements.details.addEventListener('click', toggleAllDetails, false);\r\n        elements.print.addEventListener('click', printDocument, false);\r\n        elements.download.addEventListener('click', downloadDocument, false);\r\n        elements.hideRequests.addEventListener('click', hideRequests, false);\r\n        if (elements.today) {\r\n            const now = new Date();\r\n            elements.today.textContent = `(au ${('0' + now.getDate()).slice(-2)}/${('0' + (now.getMonth() + 1)).slice(-2)}/${now.getFullYear()})`;\r\n        }\r\n    }\r\n\r\n    function toggleAllDetails(event) {\r\n        event.preventDefault && event.preventDefault();\r\n\r\n        const elements = document.querySelectorAll('details');\r\n        let index = -1, element, hasClosed = false;\r\n        while (!hasClosed && ++index < elements.length) {\r\n            element = elements[index];\r\n            hasClosed = !element.attributes['open'];\r\n        }\r\n\r\n        if (hasClosed) {\r\n            while (index < elements.length) {\r\n                element = elements[index];\r\n                if (!element.attributes['open']) {\r\n                    element.setAttribute('open', '');\r\n                }\r\n\r\n                index++\r\n            }\r\n        } else {\r\n            index = 0;\r\n            while (index < elements.length) {\r\n                element = elements[index];\r\n                element.removeAttribute('open');\r\n                index++\r\n            }\r\n        }\r\n    }\r\n\r\n    function printDocument(event) {\r\n        event.preventDefault && event.preventDefault();\r\n        window.print();\r\n    }\r\n\r\n    function downloadDocument(event) {\r\n        event.preventDefault && event.preventDefault();\r\n        if (typeof html2pdf !== 'undefined') {\r\n            renderDocument();\r\n            return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.type = 'application/javascript';\r\n        script.src = 'html2pdf.bundle.min.js';\r\n        if (script.readyState) {\r\n            script.addEventListener('readystatechange', renderDocument);\r\n        } else {\r\n            script.addEventListener('load', renderDocument);\r\n        }\r\n\r\n        document.head.appendChild(script);\r\n    }\r\n\r\n    function renderDocument() {\r\n        if (this.readyState && this.readyState !== 'loaded'\r\n            && this.readyState !== 'complete')\r\n            return;\r\n\r\n        const pdfOptions = {\r\n            filename: 'CV IngÃ©nieur freelance - Thibaut DISEUR - .Net C# Angular.pdf',\r\n        };\r\n        html2pdf().set(pdfOptions).from(document.body).save();\r\n    }\r\n\r\n    function hideRequests(event) {\r\n        event.preventDefault && event.preventDefault();\r\n        elements.hideRequests.parentElement.parentElement.remove();\r\n    }\r\n\r\n    function initDetailsToggle() {\r\n        const detailsElement = document.createElement('details');\r\n        if (detailsElement.open !== false && detailsElement.open !== true) {\r\n            const details = document.querySelectorAll('details');\r\n            let index;\r\n            for (index = 0; index < details.length; index++) {\r\n                details[index].addEventListener('click', toggleDetails, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    function toggleDetails(event) {\r\n        const openAttribute = event.currentTarget.attributes['open'];\r\n        if (openAttribute) {\r\n            event.currentTarget.removeAttribute('open');\r\n        } else {\r\n            event.currentTarget.setAttribute('open', '');\r\n        }\r\n    }\r\n\r\n    function requestData() {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = dataReceived;\r\n        xhttp.open('GET', '/data.json', true);\r\n        xhttp.send();\r\n    }\r\n\r\n    function dataReceived() {\r\n        if (this.readyState == 4 && this.status == 200) {\r\n            const data = JSON.parse(this.responseText);\r\n            displayData(data);\r\n        }\r\n    }\r\n\r\n    function displayData(data) {\r\n        let index, item, elements, element, elementIndex;\r\n\r\n        for (index = 0; index < data.length; index++) {\r\n            item = data[index];\r\n            if (item.id) {\r\n                elements = [document.getElementById(item.id)];\r\n            } else if (item.class) {\r\n                elements = document.getElementsByClassName(item.class);\r\n            }\r\n\r\n            if (elements.length > 0) {\r\n                for (elementIndex = 0; elementIndex < elements.length; elementIndex++) {\r\n                    element = elements[elementIndex];\r\n                    if (element) {\r\n                        element.innerText = decryptCodes(item.text, key);\r\n\r\n                        if (item.link) {\r\n                            element.href = decryptCodes(item.link, key);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function decryptCodes(content, passcode) {\r\n        const data = atob(content);\r\n        let index, calAscii, result = '';\r\n\r\n        for (index = 0; index < data.length; index++) {\r\n            calAscii = (data.charCodeAt(index) - passcode.charCodeAt(index % passcode.length));\r\n            result += String.fromCharCode(calAscii);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    function encryptCodes(content, passcode) {\r\n        let index, calAscii, result = '';\r\n        for (index = 0; index < content.length; index++) {\r\n            calAscii = (content.charCodeAt(index) + passcode.charCodeAt(index % passcode.length));\r\n            result += String.fromCharCode(calAscii);\r\n        }\r\n\r\n        return btoa(result);\r\n    }\r\n\r\n})(window, document);"],"names":["window","document","key","toggleAllDetails","event","preventDefault","elements","querySelectorAll","index","element","hasClosed","length","attributes","setAttribute","removeAttribute","printDocument","print","downloadDocument","html2pdf","script","createElement","type","src","readyState","addEventListener","renderDocument","head","appendChild","this","set","filename","from","body","save","hideRequests","parentElement","remove","toggleDetails","currentTarget","dataReceived","status","data","item","elementIndex","id","getElementById","class","getElementsByClassName","innerText","decryptCodes","text","link","href","displayData","JSON","parse","responseText","content","passcode","atob","calAscii","result","charCodeAt","String","fromCharCode","elementsId","details","download","today","now","Date","textContent","getDate","slice","getMonth","getFullYear","initElements","detailsElement","open","initDetailsToggle","xhttp","XMLHttpRequest","onreadystatechange","send","requestData","error","console","init"],"mappings":"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"}